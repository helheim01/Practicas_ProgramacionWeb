<!DOCTYPE html>
<html>
<head>
  <title>MutationObserver Example</title>
</head>
<body>

  <div id="contenedor"></div>

  <script>
    // Div donde van a pasar los cambios
    const contenedor = document.getElementById("contenedor");

    // Creamos el observador
    const observer = new MutationObserver(mutaciones => {  //MutationObserver: Clase JS que "vigila" el DOM y ejecuta una función cada vez que ocurre un cambio.
      mutaciones.forEach(m => { // mutaciones: array con todos los cambios detectados
        console.log("Cambio detectado:", m);  
      });
    });

    // Le digo al observador QUÉ tiene que mirar
    //    - childList: true → vigila si se agregan o eliminan hijos (ej: un <p> nuevo)
    //    - attributes: true → vigila si cambian atributos de ese nodo (ej: id, class, etc.)
    observer.observe(contenedor, { childList: true, attributes: true });

    // Simulo un cambio en el DOM después de 2 segundos
    setTimeout(() => {
      const nuevo = document.createElement("p"); // Creo un <p>
      nuevo.textContent = "Elemento agregado dinámicamente"; //le pongo texto
      // Lo agregamos dentro del contenedor
      contenedor.appendChild(nuevo);
      // Al hacer esto, el MutationObserver detecta el cambio
      // y ejecuta la función de arriba → console.log("Cambio detectado:", m)
    }, 2000);

    /*
    Explicación:
      Tengo un div vacío.
      Le digo al MutationObserver: "Mirá este div y avisame si pasa algo adentro o si le cambian atributos".
      A los 2 segundos, agregamos un <p> dentro del div.
      El observador detecta el cambio y lo muestra en la consola.
    */
  </script>

</body>
</html>
