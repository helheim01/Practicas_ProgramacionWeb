<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UML Vehículos</title>
</head>
<body>
  <p id="demo"></p>
  <script>
    class Rueda {
      #marca; #rodaje;
      constructor(marca, rodaje) {
        this.#marca = marca; this.#rodaje = rodaje;
      }
      get marca() { return this.#marca; }
      get rodaje() { return this.#rodaje; }
      mostrar() { return `Rueda ${this.#marca}, ${this.#rodaje} km`; }
    }

    class Remolque {
      #longitud;
      constructor(longitud) { this.#longitud = longitud; }
      mostrar() { return `Remolque de ${this.#longitud} m`; }
    }

    class Frigorifico {
      #temperatura;
      constructor(temp) { this.#temperatura = temp; }
      mostrar() { return `Frigorífico a ${this.#temperatura}°C`; }
    }

    class Motor {
      #tipo; #caballos; #descripcion;
      constructor(tipo, caballos, desc) {
        this.#tipo = tipo; this.#caballos = caballos; this.#descripcion = desc;
      }
      mostrar() { return `Motor ${this.#tipo}, ${this.#caballos} CV (${this.#descripcion})`; }
    }

    class Titulo {
      #prop;
      constructor(prop) { this.#prop = prop; }
      get prop() { return this.#prop; }
    }

    class RNA {
      #provincia; #info;
      constructor(provincia, info) {
        this.#provincia = provincia; this.#info = info;
      }
      registrar(titulo) {
        return `Título de ${titulo.prop} registrado en ${this.#provincia} (${this.#info})`;
      }
    }

    class Vehiculo {
      #velocidad; #marca; #modelo; #ano;
      constructor(marca, modelo, ano, vel) {
        this.#marca = marca; this.#modelo = modelo;
        this.#ano = ano; this.#velocidad = vel;
        this.ruedas = []; 
        this.motor = null;
        this.titulo = null;
      }
      agregarRueda(rueda) { this.ruedas.push(rueda); }
      ponerMotor(motor) { this.motor = motor; }
      ponerTitulo(titulo) { this.titulo = titulo; }
      acelerar() { this.#velocidad += 10; }
      frenar() { this.#velocidad -= 10; }
      compararVelocidad(otroVehiculo) {
        if (this.#velocidad > otroVehiculo.#velocidad) return `${this.#marca} es más rápido`;
        if (this.#velocidad < otroVehiculo.#velocidad) return `${otroVehiculo.#marca} es más rápido`;
        return "Ambos tienen la misma velocidad";
      }
      info() {
        return `${this.#marca} ${this.#modelo} (${this.#ano}) - Vel: ${this.#velocidad} km/h`;
      }
    }

    class Auto extends Vehiculo {
      #cantPuertas;
      constructor(marca, modelo, ano, vel, puertas) {
        super(marca, modelo, ano, vel);
        this.#cantPuertas = puertas;
      }
      info() { return `Auto: ${super.info()}, Puertas: ${this.#cantPuertas}`; }
    }

    class Camion extends Vehiculo {
      #capacidadCarga;
      constructor(marca, modelo, ano, vel, capacidad) {
        super(marca, modelo, ano, vel);
        this.#capacidadCarga = capacidad;
        this.remolque = null;
        this.frigorifico = null;
      }
      engancharRemolque(r) { this.remolque = r; }
      engancharFrigorifico(f) { this.frigorifico = f; }
      info() {
        let base = `Camión: ${super.info()}, Carga: ${this.#capacidadCarga} kg`;
        if (this.remolque) base += " + " + this.remolque.mostrar();
        if (this.frigorifico) base += " + " + this.frigorifico.mostrar();
        return base;
      }
    }

    class Fabrica {
      #nombre;
      constructor(nombre) { this.#nombre = nombre; }
      construir(marca, modelo, ano, vel) {
        return new Vehiculo(marca, modelo, ano, vel);
      }
    }

    class Concesionario {
      #nombre; #vehiculos;
      constructor(nombre) { this.#nombre = nombre; this.#vehiculos = []; }
      agregarVehiculo(v) { this.#vehiculos.push(v); }
      mostrar() {
        return `Concesionario ${this.#nombre}:<br>` + 
          this.#vehiculos.map(v => v.info()).join("<br>");
      }
    }
    
    const auto = new Auto("Ford", "Focus", 2020, 180, 4);
    auto.agregarRueda(new Rueda("Michelin", 10000));
    auto.ponerMotor(new Motor("Nafta", 120, "1.6L"));

    const camion = new Camion("Volvo", "FH16", 2022, 160, 30000);
    camion.engancharRemolque(new Remolque(12));
    camion.engancharFrigorifico(new Frigorifico(-18));

    const fabrica = new Fabrica("Ford Argentina");
    const vehiculoGenerico = fabrica.construir("Ford","Fiesta",2019,150);

    const titulo = new Titulo("Juan Pérez");
    vehiculoGenerico.ponerTitulo(titulo);

    const registro = new RNA("Buenos Aires","Oficina Central");

    const concesionario = new Concesionario("Multimarcas");
    concesionario.agregarVehiculo(auto);
    concesionario.agregarVehiculo(camion);
    concesionario.agregarVehiculo(vehiculoGenerico);

    document.getElementById("demo").innerHTML =
      concesionario.mostrar() + "<br><br>" +
      registro.registrar(titulo) + "<br>" +
      auto.compararVelocidad(camion);
  </script>
</body>
</html>
